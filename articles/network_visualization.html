<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="NAIR">
<title>Network Visualization â€¢ NAIR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Network Visualization">
<meta property="og:description" content="NAIR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">NAIR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.3.9001</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/NAIR.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/buildRepSeqNetwork.html">buildRepSeqNetwork()/buildNet()</a>
    <a class="dropdown-item" href="../articles/node_properties.html">Node-Level Network Properties</a>
    <a class="dropdown-item" href="../articles/cluster_analysis.html">Cluster Analysis</a>
    <a class="dropdown-item" href="../articles/network_visualization.html">Network Visualization</a>
    <a class="dropdown-item" href="../articles/supplementary.html">Supplementary Functions</a>
    <a class="dropdown-item" href="../articles/dual_chain.html">Dual-Chain Network Analysis</a>
    <a class="dropdown-item" href="../articles/associated_clusters.html">Searching for Associated TCR/BCR Clusters</a>
    <a class="dropdown-item" href="../articles/public_clusters.html">Searching for Public TCR/BCR Clusters</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/mlizhangx/Network-Analysis-for-Repertoire-Sequencing-/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Network Visualization</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/mlizhangx/Network-Analysis-for-Repertoire-Sequencing-/blob/HEAD/vignettes/network_visualization.Rmd" class="external-link"><code>vignettes/network_visualization.Rmd</code></a></small>
      <div class="d-none name"><code>network_visualization.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>Customized visual plots of a network graph can be produced when
calling <code><a href="../reference/buildRepSeqNetwork.html">buildRepSeqNetwork()</a></code> and afterward using using
<code><a href="../reference/addPlots.html">addPlots()</a></code>.</p>
<div class="section level5">
<h5 id="simulate-data-for-demonstration">Simulate Data for Demonstration<a class="anchor" aria-label="anchor" href="#simulate-data-for-demonstration"></a>
</h5>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://mlizhangx.github.io/Network-Analysis-for-Repertoire-Sequencing-/">NAIR</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Welcome to NAIR: Network Analysis of Immune Repertoire.</span></span>
<span><span class="co">#&gt; Get started using `vignette("NAIR")`, or by visiting</span></span>
<span><span class="co">#&gt; https://mlizhangx.github.io/Network-Analysis-for-Repertoire-Sequencing-/</span></span>
<span><span class="va">toy_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/simulateToyData.html">simulateToyData</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="producing-plots">Producing Plots<a class="anchor" aria-label="anchor" href="#producing-plots"></a>
</h2>
<div class="section level5">
<h5 id="with-buildrepseqnetworkbuildnet">With <code>buildRepSeqNetwork()</code>/<code>buildNet()</code><a class="anchor" aria-label="anchor" href="#with-buildrepseqnetworkbuildnet"></a>
</h5>
<p><code><a href="../reference/buildRepSeqNetwork.html">buildRepSeqNetwork()</a></code> automatically generates a plot of
the network graph by default:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">net</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/buildRepSeqNetwork.html">buildNet</a></span><span class="op">(</span><span class="va">toy_data</span>, <span class="st">"CloneSeq"</span><span class="op">)</span></span>
<span><span class="va">net</span><span class="op">$</span><span class="va">plots</span><span class="op">$</span><span class="va">uniform_color</span></span></code></pre></div>
<p><img src="network_visualization_files/figure-html/unnamed-chunk-2-1.png" width="100%" style="display: block; margin: auto;"></p>
</div>
<div class="section level5">
<h5 id="with-addplots">
<a name="generating-new-plots"></a><a name="new_plots"></a> With
<code>addPlots()</code><a class="anchor" aria-label="anchor" href="#with-addplots"></a>
</h5>
<p><code><a href="../reference/addPlots.html">addPlots()</a></code> can be used with the list returned by
<code><a href="../reference/buildRepSeqNetwork.html">buildRepSeqNetwork()</a></code> to generate additional plots of the
network graph.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">net</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/addPlots.html">addPlots</a></span><span class="op">(</span><span class="va">net</span>, color_nodes_by <span class="op">=</span> <span class="st">"SampleID"</span><span class="op">)</span></span>
<span><span class="va">net</span><span class="op">$</span><span class="va">plots</span><span class="op">$</span><span class="va">SampleID</span></span></code></pre></div>
<p><img src="network_visualization_files/figure-html/unnamed-chunk-3-1.png" width="100%" style="display: block; margin: auto;"></p>
</div>
<div class="section level4">
<h4 id="reproducibility-of-graph-layout">Reproducibility of Graph Layout<a class="anchor" aria-label="anchor" href="#reproducibility-of-graph-layout"></a>
</h4>
<p>When creating the initial plot for a network, the coordinate layout
of the nodes is generated pseudo-randomly. Other plots created in the
same call to <code><a href="../reference/buildRepSeqNetwork.html">buildRepSeqNetwork()</a></code> and subsequent calls to
<code><a href="../reference/addPlots.html">addPlots()</a></code> will use the same graph layout as the initial
plot (compare the previous two plots).</p>
<p>Different calls to <code><a href="../reference/buildRepSeqNetwork.html">buildRepSeqNetwork()</a></code>, however, can
produce plots of the same network with different layouts (compare the
previous plot and next plot). For this reason, it is recommended to use
<code><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed()</a></code> before calling
<code><a href="../reference/buildRepSeqNetwork.html">buildRepSeqNetwork()</a></code>. This allows the same graph layout to
be reproduced across multiple executions of the same code in which the
initial plots are generated.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span></span>
<span><span class="va">net</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/buildRepSeqNetwork.html">buildNet</a></span><span class="op">(</span><span class="va">toy_data</span>, <span class="st">"CloneSeq"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 class="tabset" id="node-colors">
<a name="node_colors"></a> Node Colors<a class="anchor" aria-label="anchor" href="#node-colors"></a>
</h2>
<div class="section level5">
<h5 id="color-nodes-according-to-metadata">Color Nodes According to Metadata<a class="anchor" aria-label="anchor" href="#color-nodes-according-to-metadata"></a>
</h5>
<p>The nodes in the graph can be colored according to available
metadata. The <code>color_nodes_by</code> parameter accepts a character
string naming the variable to use. This can be any variable present in
the <a href="https://mlizhangx.github.io/Network-Analysis-for-Repertoire-Sequencing-/articles/buildRepSeqNetwork.html#node-metadata">node
metadata</a>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/buildRepSeqNetwork.html">buildNet</a></span><span class="op">(</span><span class="va">toy_data</span>, <span class="st">"CloneSeq"</span>, </span>
<span>         color_nodes_by <span class="op">=</span> <span class="st">"CloneCount"</span>,</span>
<span>         print_plots <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="network_visualization_files/figure-html/unnamed-chunk-5-1.png" width="100%" style="display: block; margin: auto;"></p>
</div>
<div class="section level5">
<h5 id="node-color-scale">Node Color Scale<a class="anchor" aria-label="anchor" href="#node-color-scale"></a>
</h5>
<p>The <code>color_scheme</code> parameter accepts a character string
naming a preset color scale to use when coloring the nodes. It accepts
the following values:</p>
<ul>
<li>
<code>"default"</code> for default <code>ggplot2</code> colors</li>
<li>One of the following color scales from the <a href="https://CRAN.R-project.org/package=viridis" class="external-link"><code>viridis</code></a>
package:</li>
<li>
<code>"magma"</code> (or <code>"A"</code>)</li>
<li>
<code>"inferno"</code> (or <code>"B"</code>)</li>
<li>
<code>"plasma"</code> (or <code>"C"</code>)</li>
<li>
<code>"viridis"</code> (or <code>"D"</code>)</li>
<li>
<code>"cividis"</code> (or <code>"E"</code>)</li>
<li>
<code>"rocket"</code> (or <code>"F"</code>)</li>
<li>
<code>"mako"</code> (or <code>"G"</code>)</li>
<li>
<code>"turbo"</code> (or <code>"H"</code>)</li>
<li>Any of the above <code>viridis</code> color scales with
<code>"-1"</code> appended (e.g., <code>"mako-1"</code>), which reverses
the direction of the color scale</li>
<li>If the variable is discrete, a color palette from
<code><a href="https://rdrr.io/r/grDevices/palettes.html" class="external-link">grDevices::hcl.pals()</a></code> (e.g., <code>"RdBu"</code>)</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">net</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/buildRepSeqNetwork.html">buildNet</a></span><span class="op">(</span><span class="va">toy_data</span>, <span class="st">"CloneSeq"</span>, </span>
<span>                node_stats <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                color_nodes_by <span class="op">=</span> <span class="st">"transitivity"</span>, </span>
<span>                color_scheme <span class="op">=</span> <span class="st">"plasma-1"</span>,</span>
<span>                print_plots <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="network_visualization_files/figure-html/unnamed-chunk-6-1.png" width="100%" style="display: block; margin: auto;"></p>
</div>
<div class="section level5">
<h5 class="tabset" id="custom-color-scales">
<a name="modifying_plots"></a> Custom Color
Scales<a class="anchor" aria-label="anchor" href="#custom-color-scales"></a>
</h5>
<p>The color scales that are available through the
<code>color_scheme</code> parameter are limited to a selection of preset
color scales. A customized color scale can be applied to the plot after
it is created.</p>
<p>If the variable used to color the nodes is continuous, a custom
two-color gradient can be applied using
<code><a href="https://ggplot2.tidyverse.org/reference/scale_gradient.html" class="external-link">ggplot2::scale_color_gradient()</a></code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">net</span><span class="op">$</span><span class="va">plots</span><span class="op">$</span><span class="va">transitivity</span> <span class="op">&lt;-</span> <span class="va">net</span><span class="op">$</span><span class="va">plots</span><span class="op">$</span><span class="va">transitivity</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_gradient.html" class="external-link">scale_color_gradient</a></span><span class="op">(</span>low <span class="op">=</span> <span class="st">"pink"</span>, high <span class="op">=</span> <span class="st">"purple4"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Scale for <span style="color: #00BB00;">colour</span> is already present.</span></span>
<span><span class="co">#&gt; Adding another scale for <span style="color: #00BB00;">colour</span>, which will replace the existing scale.</span></span>
<span></span>
<span><span class="va">net</span><span class="op">$</span><span class="va">plots</span><span class="op">$</span><span class="va">transitivity</span>  </span></code></pre></div>
<p><img src="network_visualization_files/figure-html/unnamed-chunk-7-1.png" width="100%" style="display: block; margin: auto;"></p>
<p>Similarly, <code><a href="https://ggplot2.tidyverse.org/reference/scale_gradient.html" class="external-link">ggplot2::scale_color_gradient2()</a></code> can be used
to apply a three-color diverging gradient.</p>
<p>If the variable used to color the nodes is discrete, a custom color
palette can be applied using the
<code><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">ggplot2::scale_color_manual()</a></code> function, which allows the
user to specify the color used for each value. The parameter
<code>values</code> accepts a vector of colors whose length matches the
number of unique values.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Sample ID is a discrete variable</span></span>
<span><span class="va">net</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/addPlots.html">addPlots</a></span><span class="op">(</span><span class="va">net</span>, color_nodes_by <span class="op">=</span> <span class="st">"SampleID"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">net</span><span class="op">$</span><span class="va">plots</span><span class="op">$</span><span class="va">SampleID</span> <span class="op">&lt;-</span> <span class="va">net</span><span class="op">$</span><span class="va">plots</span><span class="op">$</span><span class="va">SampleID</span> <span class="op">+</span> </span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_color_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"deepskyblue"</span>, <span class="st">"red2"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">net</span><span class="op">$</span><span class="va">plots</span><span class="op">$</span><span class="va">SampleID</span></span></code></pre></div>
<p><img src="network_visualization_files/figure-html/unnamed-chunk-8-1.png" width="100%" style="display: block; margin: auto;"></p>
</div>
</div>
<div class="section level2">
<h2 class="tabset" id="node-size">
<a name="node_size"></a> Node Size<a class="anchor" aria-label="anchor" href="#node-size"></a>
</h2>
<p>By default, all nodes are drawn using a uniform size value of 0.5.
This value is suitable for large networks with many nodes.</p>
<p>The node size can be specified by providing a positive value to the
<code>size_nodes_by</code> parameter.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">net</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/addPlots.html">addPlots</a></span><span class="op">(</span><span class="va">net</span>,</span>
<span>                color_nodes_by <span class="op">=</span> <span class="st">"transitivity"</span>, </span>
<span>                color_scheme <span class="op">=</span> <span class="st">"plasma-1"</span>,</span>
<span>                size_nodes_by <span class="op">=</span> <span class="fl">1.5</span>,</span>
<span>                print_plots <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="network_visualization_files/figure-html/unnamed-chunk-9-1.png" width="100%" style="display: block; margin: auto;"></p>
<div class="section level5">
<h5 id="size-nodes-according-to-metadata">Size Nodes According to Metadata<a class="anchor" aria-label="anchor" href="#size-nodes-according-to-metadata"></a>
</h5>
<p>The nodes can be sized dynamically according to a variable in the <a href="https://mlizhangx.github.io/Network-Analysis-for-Repertoire-Sequencing-/articles/buildRepSeqNetwork.html#node-metadata">node
metadata</a>. The <code>size_nodes_by</code> parameter accepts a
character string naming the variable.</p>
<p>The node size scale can be adjusted using the
<code>node_size_limits</code> parameter, which accepts a numeric vector
of length two specifying the minimum and maximum node size.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">net</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/addPlots.html">addPlots</a></span><span class="op">(</span><span class="va">net</span>,</span>
<span>                color_nodes_by <span class="op">=</span> <span class="st">"transitivity"</span>, </span>
<span>                color_scheme <span class="op">=</span> <span class="st">"plasma-1"</span>,</span>
<span>                size_nodes_by <span class="op">=</span> <span class="st">"degree"</span>, </span>
<span>                node_size_limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">2.5</span><span class="op">)</span>,</span>
<span>                print_plots <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="network_visualization_files/figure-html/unnamed-chunk-10-1.png" width="100%" style="display: block; margin: auto;"></p>
</div>
</div>
<div class="section level2">
<h2 class="tabset" id="text-elements">Text Elements<a class="anchor" aria-label="anchor" href="#text-elements"></a>
</h2>
<p>This section covers parameters that control text elements in the
plot, such as titles, annotations and legends.</p>
<div class="section level4">
<h4 id="title-and-subtitle">Title and Subtitle<a class="anchor" aria-label="anchor" href="#title-and-subtitle"></a>
</h4>
<p>The default title for plots created by
<code><a href="../reference/buildRepSeqNetwork.html">buildRepSeqNetwork()</a></code> is the argument value to the
<code>output_name</code> parameter (<code>"MyRepSeqNetwork"</code> by
default). Plots created by <code><a href="../reference/addPlots.html">addPlots()</a></code> have no default
title.</p>
<p>For both <code><a href="../reference/buildRepSeqNetwork.html">buildRepSeqNetwork()</a></code> and
<code><a href="../reference/addPlots.html">addPlots()</a></code>, the default subtitle includes information about
the networkâ€™s construction, such as the values of <code>dist_type</code>
and <code>dist_cutoff</code>.</p>
<p>A custom plot title and subtitle can be provided as character strings
to the <code>plot_title</code> and <code>plot_subtitle</code>
parameters. An argument value of <code>NULL</code> omits the
corresponding element from the plot.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">net</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/addPlots.html">addPlots</a></span><span class="op">(</span></span>
<span>  <span class="va">net</span>,</span>
<span>  plot_title <span class="op">=</span> <span class="st">"Immune Repertoire Network by TCR Sequence Similarity"</span>,</span>
<span>  plot_subtitle <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 class="tabset" id="legends">Legends<a class="anchor" aria-label="anchor" href="#legends"></a>
</h4>
<div class="section level5">
<h5 id="hiding-legends">Hiding Legends<a class="anchor" aria-label="anchor" href="#hiding-legends"></a>
</h5>
<p>By default, if the nodes are colored or sized dynamically according
to a variable, a legend will be included in the plot showing the color
scale and/or size scale.</p>
<p>The color scale legend can be hidden using
<code>color_legend = FALSE</code>. Similarly,
<code>size_legend = FALSE</code> hides the size scale legend.</p>
<p><strong>Note:</strong> When the variable used to color the nodes is
discrete with more than 20 distinct values, the color scale is
automatically excluded from the legend to prevent it from crowding the
plot. The name of the node color variable is then appended to the plotâ€™s
subtitle. To force the color legend to be shown, use
<code>color_legend = TRUE</code>.</p>
</div>
<div class="section level5">
<h5 id="legend-titles">Legend Titles<a class="anchor" aria-label="anchor" href="#legend-titles"></a>
</h5>
<p>The default titles of the color and size scales are the names of the
variables used to color and size the nodes. Custom titles can be
provided as character strings to the <code>color_title</code> and
<code>size_title</code> parameters. An argument value of
<code>NULL</code> or <code>""</code> omits the title.</p>
<p>If a vector is provided to the <code>color_nodes_by</code> parameter
in order to <a href="#multiple_plots">generate multiple plots</a>, then
the <code>color_title</code> accepts a character vector of matching
length, where each entry is the title for the color legend in the
corresponding plot.</p>
</div>
</div>
<div class="section level4">
<h4 id="labeling-clusters">
<a name="labeling_clusters"></a> Labeling Clusters<a class="anchor" aria-label="anchor" href="#labeling-clusters"></a>
</h4>
<p>After <a href="https://mlizhangx.github.io/Network-Analysis-for-Repertoire-Sequencing-/articles/cluster_analysis.html">performing
cluster analysis</a>, it can be helpful to label clusters in the plot
with their cluster IDs for reference, as shown <a href="https://mlizhangx.github.io/Network-Analysis-for-Repertoire-Sequencing-/articles/cluster_analysis.html#labeling-clusters">here</a>.</p>
</div>
<div class="section level4">
<h4 id="labeling-nodes">Labeling Nodes<a class="anchor" aria-label="anchor" href="#labeling-nodes"></a>
</h4>
<p><code><a href="../reference/addGraphLabels.html">addGraphLabels()</a></code> can be used to label individual
nodes.</p>
</div>
</div>
<div class="section level2">
<h2 id="generating-multiple-plots">
<a name="multiple_plots"></a> Generating Multiple Plots<a class="anchor" aria-label="anchor" href="#generating-multiple-plots"></a>
</h2>
<p><code><a href="../reference/buildRepSeqNetwork.html">buildRepSeqNetwork()</a></code> and <code><a href="../reference/addPlots.html">addPlots()</a></code> can
generate multiple plots in a single call, with each plot coloring the
nodes according to a different variable. The <code>color_nodes_by</code>
parameter accepts a character vector naming the variables to use. The
<code>color_scheme</code> parameter will accept a character vector of
matching length specifying the color scale for each plot, or a character
string specifying a single color scale to use in all plots.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">net</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/addPlots.html">addPlots</a></span><span class="op">(</span><span class="va">net</span>,</span>
<span>                color_nodes_by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"coreness"</span>, <span class="st">"degree"</span><span class="op">)</span>,</span>
<span>                color_scheme <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"plasma-1"</span>, <span class="st">"mako-1"</span><span class="op">)</span>,</span>
<span>                color_title <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Coreness"</span>, <span class="st">"Network Degree"</span><span class="op">)</span>,</span>
<span>                size_title <span class="op">=</span> <span class="st">"Network Degree"</span>,</span>
<span>                size_nodes_by <span class="op">=</span> <span class="st">"degree"</span>, </span>
<span>                node_size_limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">1.5</span><span class="op">)</span>,</span>
<span>                plot_subtitle <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                print_plots <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="network_visualization_files/figure-html/unnamed-chunk-12-1.png" width="100%" style="display: block; margin: auto;"><img src="network_visualization_files/figure-html/unnamed-chunk-12-2.png" width="100%" style="display: block; margin: auto;"></p>
</div>
<div class="section level2">
<h2 id="saving-plots">Saving Plots<a class="anchor" aria-label="anchor" href="#saving-plots"></a>
</h2>
<p>After adding or modifying plots in the list of network objects, the
list of network objects can be saved using <code><a href="../reference/saveNetwork.html">saveNetwork()</a></code>,
which also prints the plots to a PDF. <code><a href="../reference/saveNetworkPlots.html">saveNetworkPlots()</a></code>
saves the PDF only.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/saveNetwork.html">saveNetwork</a></span><span class="op">(</span><span class="va">net</span>, output_dir <span class="op">=</span> <span class="va">dir_out</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/saveNetworkPlots.html">saveNetworkPlots</a></span><span class="op">(</span><span class="va">net</span><span class="op">$</span><span class="va">plots</span>, outfile <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">dir_out</span>, <span class="st">"plots.pdf"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Brian Neal, Hai Yang, Daniil Matveev, Phi Long Le, Li Zhang.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
